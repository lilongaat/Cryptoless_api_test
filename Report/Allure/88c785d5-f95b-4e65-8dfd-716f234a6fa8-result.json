{"status": "broken", "statusDetails": {"message": "UnboundLocalError: local variable 'block_height_network' referenced before assignment", "trace": "self = <test_blockheight_check.Test_block_height_check object at 0x1101084f0>, test_title = '', networkCode = 'ATOM'\ngaps = 5\n\n    @allure.story(\"Block Height Check!\")\n    @allure.title('{test_title}')\n    @pytest.mark.parametrize('test_title,networkCode,gaps', test_data)\n    def test_custodial(self,test_title,networkCode,gaps):\n    \n        with allure.step(\"浏览器查询块高\"):\n            block_explore = Httpexplore.Block_explore.block_height(networkCode)\n            time_explore = Conf.Config.now_time()\n            if block_explore.status_code == 200:\n                if networkCode == \"BTC\":\n                    block_height = block_explore.json()[\"data\"][0][\"id\"]\n                elif networkCode == \"DOGE\":\n                    block_height = block_explore.json()\n                elif networkCode == \"ETH\":\n                    block_height = int(block_explore.json()[\"result\"],16)\n                elif networkCode == \"GOERLI\":\n                    block_height = int(block_explore.json()[\"result\"],16)\n                elif networkCode == \"BSC\":\n                    block_height = int(block_explore.json()[\"result\"])\n                elif networkCode == \"MATIC\":\n                    block_height = int(block_explore.json()[\"result\"])\n                elif networkCode == \"ATOM\":\n                    block_height = int(block_explore.json()[\"block\"][\"last_commit\"][\"height\"])\n                elif networkCode == \"IRIS\":\n                    block_height = int(block_explore.json()[\"block\"][\"last_commit\"][\"height\"])\n                elif networkCode == \"DOT\":\n                    block_height = block_explore.json()[\"data\"][\"blocks\"][0][\"block_num\"]\n                elif networkCode == \"CLV\":\n                    block_height = block_explore.json()[\"data\"][\"count\"]\n                else:\n                    raise Exception(\"networkCode No Support\")\n            else:\n                block_height = \"Serve Error \" + str(block_explore.status_code)\n    \n        logger.debug(block_height)\n    \n        with allure.step(\"Graphql查询块高\"):\n            block_graphql = Graphql.Graphql.getLatestBlock(networkCode)\n            time_graphql = Conf.Config.now_time()\n            if block_graphql.status_code == 200:\n                block_height_graphql = block_graphql.json()[\"data\"][\"getLatestBlock\"][\"blockNumber\"]\n            else:\n                block_height_graphql = \"Serve Error \" + str(block_graphql.status_code)\n    \n        with allure.step(\"Network查询块高\"):\n            networks = Http.HttpUtils.networks(networkCode)\n            time_network = Conf.Config.now_time()\n            if networks.status_code == 200:\n                block_height_network_list = ([n.get(\"blocks\") for n in networks.json() if n.get(\"code\") == networkCode])\n                if block_height_network_list == [None]:\n                    Httpfs.HttpFs.send_msg((networkCode + 'Height!\\n' + \"浏览器查询最新高度(\" + time_explore + \"): \" + str(block_height) + \"\\n\" + \"Graphql查询最新高度(\" + time_graphql + \"): \" + str(block_height_graphql) + \"\\n\" + \"NetWork查询最新高度(\" + time_network + \"): \" + str(block_height_network_list[0])))\n                else:\n                    block_height_network = int(block_height_network_list[0])\n            else:\n                block_height_network = \"Serve Error \" + str(networks.status_code)\n    \n        with allure.step(\"对比浏览器查询块高&Network查询块高\"):\n            if block_explore.status_code != 200 or block_graphql.status_code != 200 or networks.status_code != 200:\n                Httpfs.HttpFs.send_msg(networkCode + 'Block_Height异常!\\n' + \"浏览器查询最新高度(\" + time_explore + \"): \" + str(block_height) + \"\\n\" + \"Graphql查询最新高度(\" + time_graphql + \"): \" + str(block_height_graphql) + \"\\n\" + \"NetWork查询最新高度(\" + time_network + \"): \" + str(block_height_network))\n            else:\n>               if abs(block_height - block_height_network) > gaps:\nE               UnboundLocalError: local variable 'block_height_network' referenced before assignment\n\nTestcase/Test_NetworkCode/Test_block/test_blockheight_check.py:102: UnboundLocalError"}, "steps": [{"name": "浏览器查询块高", "status": "passed", "start": 1673520527746, "stop": 1673520528936}, {"name": "Graphql查询块高", "status": "passed", "start": 1673520528936, "stop": 1673520529022}, {"name": "Network查询块高", "status": "passed", "start": 1673520529022, "stop": 1673520529759}, {"name": "对比浏览器查询块高&Network查询块高", "status": "broken", "statusDetails": {"message": "UnboundLocalError: local variable 'block_height_network' referenced before assignment\n", "trace": "  File \"/Users/lilong/Documents/Test_Api/Testcase/Test_NetworkCode/Test_block/test_blockheight_check.py\", line 102, in test_custodial\n    if abs(block_height - block_height_network) > gaps:\n"}, "start": 1673520529759, "stop": 1673520529759}], "attachments": [{"name": "log", "source": "41f5f7b5-01dd-48e3-95c8-35a9f420b1b5-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "test_title", "value": "''"}, {"name": "networkCode", "value": "'ATOM'"}, {"name": "gaps", "value": "5"}], "start": 1673520527745, "stop": 1673520529759, "uuid": "310d5795-9ea2-429a-bf8f-d6e0c344aebe", "historyId": "1159fa4adefd2a1f51097a1cc1ae19fb", "testCaseId": "d4b9d66082e3449859d4337f913a04f9", "fullName": "Testcase.Test_NetworkCode.Test_block.test_blockheight_check.Test_block_height_check#test_custodial", "labels": [{"name": "story", "value": "Block Height Check!"}, {"name": "feature", "value": "Block Height!"}, {"name": "parentSuite", "value": "Testcase.Test_NetworkCode.Test_block"}, {"name": "suite", "value": "test_blockheight_check"}, {"name": "subSuite", "value": "Test_block_height_check"}, {"name": "host", "value": "lilongdeMacBook-Pro.local"}, {"name": "thread", "value": "1230-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "Testcase.Test_NetworkCode.Test_block.test_blockheight_check"}]}