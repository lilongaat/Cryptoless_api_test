{"uid":"e074ea1303100f5b","name":"MATIC Custodial账户转账 erc20coin","fullName":"Testcase.Test_Cloud.Test_Transfer.Test_Custodial.test_transfer_custodial_success.Test_transfers_success#test_custodial","historyId":"767e5d7e1c164e9359c9d27a9dee47bd","time":{"start":1675665039142,"stop":1675665045067,"duration":5925},"status":"failed","statusMessage":"AssertionError: assert 400 == 200\n +  where 400 = <Response [400]>.status_code","statusTrace":"self = <test_transfer_custodial_success.Test_transfers_success object at 0x10e77a520>\ntest_title = 'MATIC Custodial账户转账 erc20coin', networkCode = 'MATIC', symbol = 'USDC'\nfrom_add = '0xe458fd3e2515d42cbcd52a89b52fb662bf052143', to_add = '0x3d7f18ad2cea9b59e54dfaf09b327c1ccd899591'\namount = '0.000123'\n\n    @allure.story(\"Custodial Transfers Success!\")\n    @allure.title('{test_title}')\n    @pytest.mark.parametrize('test_title,networkCode,symbol,from_add,to_add,amount', test_data)\n    def test_custodial(self,test_title,networkCode,symbol,from_add,to_add,amount):\n    \n        with allure.step(\"浏览器查询from账户balance信息\"):\n            balance = Httpexplore.Balances_explore.query(networkCode,from_add,symbol)\n    \n        with allure.step(\"查询from账户holder信息\"):\n            holder = Http.HttpUtils.holders(networkCode=networkCode,symbol=symbol,address=from_add)\n            assert holder.status_code ==200\n            quantity = Decimal(holder.json()[\"list\"][0][\"quantity\"])\n    \n        logger.debug(\"浏览器查询账户balance为:\" + str(balance))\n        logger.debug(\"查询账户holder为:\" + str(quantity))\n    \n        with allure.step(\"账户余额相等验证 浏览器查询==holder\"):\n            assert balance == quantity\n    \n        with allure.step(\"构建交易——instructions\"):\n            body = {\n                \"networkCode\":networkCode,\n                \"type\":\"transfer\",\n                \"body\":{\n                    \"from\":from_add,\n                    \"to\":to_add,\n                    \"symbol\":symbol,\n                    \"amount\":amount\n                },\n                \"transactionParams\":{\n                    \"memo\":''.join(random.sample(string.ascii_letters + string.digits, 10))\n                }\n            }\n            transfer = Http.HttpUtils.instructions(body)\n            assert transfer.status_code == 200\n            assert transfer.json()[\"_embedded\"][\"transactions\"][0][\"statusDesc\"] == \"SIGNED\"\n    \n            id = transfer.json()[\"_embedded\"][\"transactions\"][0][\"id\"]\n    \n        with allure.step(\"广播交易\"):\n            send = Http.HttpUtils.send(id)\n>           assert send.status_code == 200\nE           assert 400 == 200\nE            +  where 400 = <Response [400]>.status_code\n\nTestcase/Test_Cloud/Test_Transfer/Test_Custodial/test_transfer_custodial_success.py:110: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"failed","statusMessage":"AssertionError: assert 400 == 200\n +  where 400 = <Response [400]>.status_code","statusTrace":"self = <test_transfer_custodial_success.Test_transfers_success object at 0x10e77a520>\ntest_title = 'MATIC Custodial账户转账 erc20coin', networkCode = 'MATIC', symbol = 'USDC'\nfrom_add = '0xe458fd3e2515d42cbcd52a89b52fb662bf052143', to_add = '0x3d7f18ad2cea9b59e54dfaf09b327c1ccd899591'\namount = '0.000123'\n\n    @allure.story(\"Custodial Transfers Success!\")\n    @allure.title('{test_title}')\n    @pytest.mark.parametrize('test_title,networkCode,symbol,from_add,to_add,amount', test_data)\n    def test_custodial(self,test_title,networkCode,symbol,from_add,to_add,amount):\n    \n        with allure.step(\"浏览器查询from账户balance信息\"):\n            balance = Httpexplore.Balances_explore.query(networkCode,from_add,symbol)\n    \n        with allure.step(\"查询from账户holder信息\"):\n            holder = Http.HttpUtils.holders(networkCode=networkCode,symbol=symbol,address=from_add)\n            assert holder.status_code ==200\n            quantity = Decimal(holder.json()[\"list\"][0][\"quantity\"])\n    \n        logger.debug(\"浏览器查询账户balance为:\" + str(balance))\n        logger.debug(\"查询账户holder为:\" + str(quantity))\n    \n        with allure.step(\"账户余额相等验证 浏览器查询==holder\"):\n            assert balance == quantity\n    \n        with allure.step(\"构建交易——instructions\"):\n            body = {\n                \"networkCode\":networkCode,\n                \"type\":\"transfer\",\n                \"body\":{\n                    \"from\":from_add,\n                    \"to\":to_add,\n                    \"symbol\":symbol,\n                    \"amount\":amount\n                },\n                \"transactionParams\":{\n                    \"memo\":''.join(random.sample(string.ascii_letters + string.digits, 10))\n                }\n            }\n            transfer = Http.HttpUtils.instructions(body)\n            assert transfer.status_code == 200\n            assert transfer.json()[\"_embedded\"][\"transactions\"][0][\"statusDesc\"] == \"SIGNED\"\n    \n            id = transfer.json()[\"_embedded\"][\"transactions\"][0][\"id\"]\n    \n        with allure.step(\"广播交易\"):\n            send = Http.HttpUtils.send(id)\n>           assert send.status_code == 200\nE           assert 400 == 200\nE            +  where 400 = <Response [400]>.status_code\n\nTestcase/Test_Cloud/Test_Transfer/Test_Custodial/test_transfer_custodial_success.py:110: AssertionError","steps":[{"name":"浏览器查询from账户balance信息","time":{"start":1675665039142,"stop":1675665040472,"duration":1330},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"查询from账户holder信息","time":{"start":1675665040472,"stop":1675665040699,"duration":227},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"账户余额相等验证 浏览器查询==holder","time":{"start":1675665040700,"stop":1675665040700,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"构建交易——instructions","time":{"start":1675665040700,"stop":1675665043747,"duration":3047},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"广播交易","time":{"start":1675665043747,"stop":1675665045066,"duration":1319},"status":"failed","statusMessage":"AssertionError: assert 400 == 200\n +  where 400 = <Response [400]>.status_code\n","statusTrace":"  File \"/Users/lilong/Documents/Test_Api/Testcase/Test_Cloud/Test_Transfer/Test_Custodial/test_transfer_custodial_success.py\", line 110, in test_custodial\n    assert send.status_code == 200\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":true,"hasContent":true}],"attachments":[{"uid":"5180c4d176f2f08","name":"log","source":"5180c4d176f2f08.txt","type":"text/plain","size":5713}],"parameters":[],"stepsCount":5,"attachmentsCount":1,"shouldDisplayMessage":true,"hasContent":true},"afterStages":[],"labels":[{"name":"feature","value":"Transfers!"},{"name":"story","value":"Custodial Transfers Success!"},{"name":"parentSuite","value":"Testcase.Test_Cloud.Test_Transfer.Test_Custodial"},{"name":"suite","value":"test_transfer_custodial_success"},{"name":"subSuite","value":"Test_transfers_success"},{"name":"host","value":"lilongdeMacBook-Pro.local"},{"name":"thread","value":"26477-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"Testcase.Test_Cloud.Test_Transfer.Test_Custodial.test_transfer_custodial_success"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"amount","value":"'0.000123'"},{"name":"from_add","value":"'0xe458fd3e2515d42cbcd52a89b52fb662bf052143'"},{"name":"networkCode","value":"'MATIC'"},{"name":"symbol","value":"'USDC'"},{"name":"test_title","value":"'MATIC Custodial账户转账 erc20coin'"},{"name":"to_add","value":"'0x3d7f18ad2cea9b59e54dfaf09b327c1ccd899591'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"e074ea1303100f5b.json","parameterValues":["'0.000123'","'0xe458fd3e2515d42cbcd52a89b52fb662bf052143'","'MATIC'","'USDC'","'MATIC Custodial账户转账 erc20coin'","'0x3d7f18ad2cea9b59e54dfaf09b327c1ccd899591'"]}